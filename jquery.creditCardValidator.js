(function(){var $,t,n,r=[].indexOf||function(t){for(var n=0,r=this.length;r>n;n++)if(n in this&&this[n]===t)return n;return-1};n=function(){function t(){this.trie={}}return t.prototype.push=function(t){var n,r,e,a,i,l,u;for(t=t.toString(),i=this.trie,l=t.split(""),u=[],r=e=0,a=l.length;a>e;r=++e)n=l[r],null==i[n]&&(r===t.length-1?i[n]=null:i[n]={}),u.push(i=i[n]);return u},t.prototype.find=function(t){var n,r,e,a,i,l;for(t=t.toString(),i=this.trie,l=t.split(""),r=e=0,a=l.length;a>e;r=++e){if(n=l[r],!i.hasOwnProperty(n))return!1;if(null===i[n])return!0;i=i[n]}},t}(),t=function(){function t(t){if(this.trie=t,this.trie.constructor!==n)throw Error("Range constructor requires a Trie parameter")}return t.rangeWithString=function(r){var e,a,i,l,u,o,c,h,f;if("string"!=typeof r)throw Error("rangeWithString requires a string parameter");for(r=r.replace(/ /g,""),r=r.split(","),f=new n,e=0,i=r.length;i>e;e++)if(o=r[e],u=o.match(/^(\d+)-(\d+)$/))for(l=a=c=u[1],h=u[2];h>=c?h>=a:a>=h;l=h>=c?++a:--a)f.push(l);else{if(!o.match(/^\d+$/))throw Error("Invalid range '"+u+"'");f.push(o)}return new t(f)},t.prototype.match=function(t){return this.trie.find(t)},t}(),$=jQuery,$.fn.validateCreditCard=function(n,e){var a,i,l,u,o,c,h,f,g,s,p,v,d;for(u=[{name:"amex",pattern:/^3[47]/,range:"34,37",valid_length:[15]},{name:"diners_club_carte_blanche",pattern:/^30[0-5]/,range:"300-305",valid_length:[14]},{name:"diners_club_international",pattern:/^36/,range:"36",valid_length:[14]},{name:"jcb",pattern:/^35(2[89]|[3-8][0-9])/,range:"3528-3589",valid_length:[16]},{name:"laser",pattern:/^(6304|670[69]|6771)/,range:"6304, 6706, 6709, 6771",valid_length:[16,17,18,19]},{name:"visa_electron",pattern:/^(4026|417500|4508|4844|491(3|7))/,range:"4026, 417500, 4508, 4844, 4913, 4917",valid_length:[16]},{name:"visa",pattern:/^4/,range:"4",valid_length:[16]},{name:"mastercard",pattern:/^5[1-5]/,range:"51-55",valid_length:[16]},{name:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,range:"5018, 5020, 5038, 6304, 6759, 6761-6763",valid_length:[12,13,14,15,16,17,18,19]},{name:"discover",pattern:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,range:"6011, 622126-622925, 644-649, 65",valid_length:[16]}],a=!1,n&&("object"==typeof n?(e=n,a=!1,n=null):"function"==typeof n&&(a=!0)),null==e&&(e={}),null==e.accept&&(e.accept=function(){var t,n,r;for(r=[],t=0,n=u.length;n>t;t++)i=u[t],r.push(i.name);return r}()),null==e.regex&&(e.regex=!1),p=e.accept,f=0,g=p.length;g>f;f++)if(l=p[f],r.call(function(){var t,n,r;for(r=[],t=0,n=u.length;n>t;t++)i=u[t],r.push(i.name);return r}(),l)<0)throw"Credit card type '"+l+"' is not supported";return o=function(n){var a,o,c,h;for(h=function(){var t,n,a,l;for(l=[],t=0,n=u.length;n>t;t++)i=u[t],a=i.name,r.call(e.accept,a)>=0&&l.push(i);return l}(),a=0,o=h.length;o>a;a++)if(l=h[a],e.regex){if(n.match(l.pattern))return l}else if(c=t.rangeWithString(l.range),c.match(n))return l;return null},h=function(t){var n,r,e,a,i,l;for(l=0,i=t.split("").reverse(),a=r=0,e=i.length;e>r;a=++r)n=i[a],n=+n,a%2?(n*=2,l+=10>n?n:n-9):l+=n;return l%10===0},c=function(t,n){var e;return e=t.length,r.call(n.valid_length,e)>=0},d=function(t){return function(t){var n,r;return l=o(t),r=!1,n=!1,null!=l&&(r=h(t),n=c(t,l)),{card_type:l,valid:r&&n,luhn_valid:r,length_valid:n,method:e.regex?"RegExp":"Trie"}}}(this),v=function(t){return function(){var n;return n=s($(t).val()),d(n)}}(this),s=function(t){return t.replace(/[ -]/g,"")},a?(this.on("input.jccv",function(t){return function(){return $(t).off("keyup.jccv"),n.call(t,v())}}(this)),this.on("keyup.jccv",function(t){return function(){return n.call(t,v())}}(this)),n.call(this,v()),this):v()}}).call(this);