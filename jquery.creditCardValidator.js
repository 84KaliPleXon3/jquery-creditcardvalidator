(function(){var t,n=[].indexOf||function(t){for(var n=0,e=this.length;e>n;n++)if(n in this&&this[n]===t)return n;return-1};t=jQuery,t.fn.validateCreditCard=function(e,r){var a,l,i,u,c,h,o,f,v,p,s,d,g;for(u=[{name:"amex",pattern:/^3[47]/,valid_length:[15]},{name:"diners_club_carte_blanche",pattern:/^30[0-5]/,valid_length:[14]},{name:"diners_club_international",pattern:/^36/,valid_length:[14]},{name:"jcb",pattern:/^35(2[89]|[3-8][0-9])/,valid_length:[16]},{name:"laser",pattern:/^(6304|670[69]|6771)/,valid_length:[16,17,18,19]},{name:"visa_electron",pattern:/^(4026|417500|4508|4844|491(3|7))/,valid_length:[16]},{name:"visa",pattern:/^4/,valid_length:[16]},{name:"mastercard",pattern:/^5[1-5]/,valid_length:[16]},{name:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,valid_length:[12,13,14,15,16,17,18,19]},{name:"discover",pattern:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,valid_length:[16]}],a=!1,e&&("object"==typeof e?(r=e,a=!1,e=null):"function"==typeof e&&(a=!0)),null==r&&(r={}),null==r.accept&&(r.accept=function(){var t,n,e;for(e=[],t=0,n=u.length;n>t;t++)l=u[t],e.push(l.name);return e}()),g=r.accept,s=0,d=g.length;d>s;s++)if(i=g[s],n.call(function(){var t,n,e;for(e=[],t=0,n=u.length;n>t;t++)l=u[t],e.push(l.name);return e}(),i)<0)throw"Credit card type '"+i+"' is not supported";return c=function(t){var e,a,c;for(c=function(){var t,e,a,i;for(i=[],t=0,e=u.length;e>t;t++)l=u[t],a=l.name,n.call(r.accept,a)>=0&&i.push(l);return i}(),e=0,a=c.length;a>e;e++)if(i=c[e],t.match(i.pattern))return i;return null},o=function(t){var n,e,r,a,l,i;for(r=0,i=t.split("").reverse(),e=a=0,l=i.length;l>a;e=++a)n=i[e],n=+n,e%2?(n*=2,r+=10>n?n:n-9):r+=n;return r%10===0},h=function(t,e){var r;return r=t.length,n.call(e.valid_length,r)>=0},p=function(t){var n,r,l;return i=c(t),r=!1,n=!1,null!=i&&(r=o(t),n=h(t,i)),l={card_type:i,luhn_valid:r,length_valid:n},a&&e(l),l},v=function(){var n;return n=f(t(this).val()),p(n)},f=function(t){return t.replace(/[ -]/g,"")},a?(this.on("input",function(){return t(this).off("keyup"),v.call(this)}),this.on("keyup",function(){return v.call(this)}),0!==this.length&&v.call(this),this):v.call(this)}}).call(this);