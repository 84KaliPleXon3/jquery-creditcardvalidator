(function(){var $,n,t,r=[].indexOf||function(n){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===n)return t;return-1};t=function(){function n(){this.trie={}}return n.prototype.push=function(n){var t,r,e,a,i,l,u;for(n=n.toString(),i=this.trie,l=n.split(""),u=[],r=e=0,a=l.length;a>e;r=++e)t=l[r],null==i[t]&&(r===n.length-1?i[t]=null:i[t]={}),u.push(i=i[t]);return u},n.prototype.find=function(n){var t,r,e,a,i,l;for(n=n.toString(),i=this.trie,l=n.split(""),r=e=0,a=l.length;a>e;r=++e){if(t=l[r],!i.hasOwnProperty(t))return!1;if(null===i[t])return!0;i=i[t]}},n}(),n=function(){function n(n){if(this.trie=n,this.trie.constructor!==t)throw Error("Range constructor requires a Trie parameter")}return n.rangeWithString=function(r){var e,a,i,l,u,o,c,h,f;if("string"!=typeof r)throw Error("rangeWithString requires a string parameter");for(r=r.replace(/ /g,""),r=r.split(","),f=new t,e=0,i=r.length;i>e;e++)if(o=r[e],u=o.match(/^(\d+)-(\d+)$/))for(l=a=c=u[1],h=u[2];h>=c?h>=a:a>=h;l=h>=c?++a:--a)f.push(l);else{if(!o.match(/^\d+$/))throw Error("Invalid range '"+u+"'");f.push(o)}return new n(f)},n.prototype.match=function(n){return this.trie.find(n)},n}(),$=jQuery,$.fn.validateCreditCard=function(t,e){var a,i,l,u,o,c,h,f,g,p,s,v,d;for(u=[{name:"amex",pattern:/^3[47]/,range:"34,37",valid_length:[15]},{name:"diners_club_carte_blanche",pattern:/^30[0-5]/,range:"300-305",valid_length:[14]},{name:"diners_club_international",pattern:/^36/,range:"36",valid_length:[14]},{name:"jcb",pattern:/^35(2[89]|[3-8][0-9])/,range:"3528-3589",valid_length:[16]},{name:"laser",pattern:/^(6304|670[69]|6771)/,range:"6304, 6706, 6709, 6771",valid_length:[16,17,18,19]},{name:"visa_electron",pattern:/^(4026|417500|4508|4844|491(3|7))/,range:"4026, 417500, 4508, 4844, 4913, 4917",valid_length:[16]},{name:"visa",pattern:/^4/,range:"4",valid_length:[13,16]},{name:"mastercard",pattern:/^5[1-5]/,range:"51-55",valid_length:[16]},{name:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,range:"5018, 5020, 5038, 6304, 6759, 6761-6763",valid_length:[12,13,14,15,16,17,18,19]},{name:"discover",pattern:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,range:"6011, 622126-622925, 644-649, 65",valid_length:[16]},{name:"dankort",pattern:/^5019/,range:"5019",valid_length:[16]}],a=!1,t&&("object"==typeof t?(e=t,a=!1,t=null):"function"==typeof t&&(a=!0)),null==e&&(e={}),null==e.accept&&(e.accept=function(){var n,t,r;for(r=[],n=0,t=u.length;t>n;n++)i=u[n],r.push(i.name);return r}()),null==e.regex&&(e.regex=!1),s=e.accept,f=0,g=s.length;g>f;f++)if(l=s[f],r.call(function(){var n,t,r;for(r=[],n=0,t=u.length;t>n;n++)i=u[n],r.push(i.name);return r}(),l)<0)throw Error("Credit card type '"+l+"' is not supported");return o=function(t){var a,o,c,h;for(h=function(){var n,t,a,l;for(l=[],n=0,t=u.length;t>n;n++)i=u[n],a=i.name,r.call(e.accept,a)>=0&&l.push(i);return l}(),a=0,o=h.length;o>a;a++)if(l=h[a],e.regex){if(t.match(l.pattern))return l}else if(c=n.rangeWithString(l.range),c.match(t))return l;return null},h=function(n){var t,r,e,a,i,l;for(l=0,i=n.split("").reverse(),a=r=0,e=i.length;e>r;a=++r)t=i[a],t=+t,a%2?(t*=2,l+=10>t?t:t-9):l+=t;return l%10===0},c=function(n,t){var e;return e=n.length,r.call(t.valid_length,e)>=0},d=function(n){var t,r;return l=o(n),r=!1,t=!1,null!=l&&(r=h(n),t=c(n,l)),{card_type:l,valid:r&&t,luhn_valid:r,length_valid:t,method:e.regex?"RegExp":"Trie"}},v=function(n){return function(){var t;return t=p($(n).val()),d(t)}}(this),p=function(n){return n.replace(/[ -]/g,"")},a?(this.on("input.jccv",function(n){return function(){return $(n).off("keyup.jccv"),t.call(n,v())}}(this)),this.on("keyup.jccv",function(n){return function(){return t.call(n,v())}}(this)),t.call(this,v()),this):v()}}).call(this);